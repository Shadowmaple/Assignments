### dvd租赁系统

1. 信息管理：vcd的类型（库存管理），租赁顾客（用户管理）、vcd入库、借还、零售
2. 操作：vcd入库、vcd零售、vcd借还
3. 存储过程：统计某段时间内各vcd销售、借还数量
4. 视图查询vcd的库存情况

#### 过程

1、需求分析

vcd表（id、名称、分类、价格、库存量、其他信息）
顾客表（id、姓名、联系方式）
vcd进货表（id、vid、数量、时间）
vcd借还记录表（id、vid、uid、btime、rtime、num、押金、状态）
vcd零售表（id、vid、uid、num、money、time）

2、逻辑分析

3、操作：

* 进货：触发器（1）进新货：before insert，查id

  ​             （2）补旧货：after update：更新库存量

  下面的都是存储过程

* 零售：输入vid、uid、num

  （1）判定库存够不够卖---》不够，输出错误信息

  （2）修改库存量，计算零售价钱

  （3）在零售表中插入相关记录

* 借阅：uid、vid、num

  (1) 判断库存--》不够输出信息

  （2）修改库存量、计算押金价格（每张固定20元，超期不还押金）

  （3）在借阅表中插入记录

* 归还：uid、vid、btime

  (1) 修改库存表

  （2）判断是否超期

  (3) 更新借阅表：归还时间、状态
